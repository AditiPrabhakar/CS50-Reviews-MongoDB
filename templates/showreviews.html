<!DOCTYPE html>

<html lang="en">

    <head>
        <meta name="viewport" content="initial-scale=1, width=device-width">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"></script>
        <link href="../static/styles.css" rel="stylesheet">
        <title>CS50 Reviews: Checkout Our Reviews</title>
        <link rel="icon" type="image/x-icon"
            href="https://upload.wikimedia.org/wikipedia/en/thumb/0/0c/Harvard_University_shield.svg/1779px-Harvard_University_shield.svg.png">
    </head>

    <body class="show_reviews">
        <h1 style="text-align: center; margin: 0; padding: 20px; font-weight: 700; position: relative;">CS50 Reviews</h1>
        <button type="button" class="btn btn-outline-light" style="position: absolute; right:0; top:0; margin: 50px" onclick="window.location.href='/homepage';">Home</button>
        {% if reviews %}
        <div class="wrap_comments">
            {% for row in reviews %}
            <div class="comments_box">
                <p>{{ row.review }}</p>
                <span>- {{ row.username }}</span>

                <div class="vote_section">
                    <!-- Upvote Form -->
                    <form method="POST" style="display: inline;">
                        <div class="vote_items">
                            <input type="hidden" name="review_id" value="{{ row.id }}">
                            <input type="hidden" name="vote_type" value="upvote">
                            <!-- Check if the user has already upvoted -->
                            <button type="submit"
                                class="btn {% if row.voted_up %}btn-success{% else %}btn-outline-success{% endif %} btn-sm mt-2"
                                {% if row.voted_up %}disabled{% endif %}>
                                Upvote
                            </button>
                            <span class="vote_count">{{ row.upvotes }}</span>
                        </div>
                    </form>

                    <!-- Downvote Form -->
                    <form method="POST" style="display: inline;">
                        <div class="vote_items">
                            <input type="hidden" name="review_id" value="{{ row.id }}">
                            <input type="hidden" name="vote_type" value="downvote">
                            <!-- Check if the user has already downvoted -->
                            <button type="submit"
                                class="btn {% if row.voted_down %}btn-danger{% else %}btn-outline-danger{% endif %} btn-sm mt-2 ms-4"
                                {% if row.voted_down %}disabled{% endif %}>
                                Downvote
                            </button>
                            <span class="vote_count">{{ row.downvotes }}</span>
                        </div>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </body>

</html>


    <!-- <div class="wrap_comments">
        {% for row in reviews %}
        <div class="comments_box">
            {{ row.review }}
            <span>-{{ row.username }}</span>
            <div class="vote_section">
                <form  style="display: inline;">
                    <div class="vote_items">
                    <input type="hidden" name="review_id" value="{{ row.id }}">
                        <button type="submit" class="btn btn-outline-success btn-sm mt-2" data-bs-toggle="button">Upvote</button>
                        <span style="border: 0.5px solid gray; padding:5px; font-size: 0.9rem; border-radius: 50px;">10</span>
                    </div>
                </form>

                <form style="display: inline;">
                    <input type="hidden" name="review_id" value="{{ row.id }}">
                     <div class="vote_items">
                        <input type="hidden" name="vote_type" value="downvote">
                        <button type="submit" class="btn btn-outline-danger btn-sm mt-2 ms-4" data-bs-toggle="button">Downvote</button>
                        <span style="border: 0.5px solid gray; padding:5px; font-size: 0.9rem; border-radius: 50px;">10</span>
                    </div>
                </form>
            </div>
        </div>
        {% endfor %}
    </div> -->
